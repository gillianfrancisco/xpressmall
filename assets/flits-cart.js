window.flitsApp&&void 0!==window.flitsApp||(window.flitsApp={}),window.flitsApp.getCookie=function(t){for(var e=t+"=",n=decodeURIComponent(document.cookie).split(";"),o=0;o<n.length;o++){for(var i=n[o];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""},window.flitsApp.get_discount_code=function(t,e){if(!e.closest("form").querySelector("[name='flits-want-to-use-credit']").checked)return!0;t.preventDefault();var n=e.innerHTML,o=window.flitsApp.multilang.applying_credit_message;"input"==e.tagName.toString().toLowerCase()?(n=e.value,e.value=o):(n=e.innerHTML,e.innerHTML=o),e.setAttribute("disabled",!0),window.flitsApp.getCartData(function(t){var o="/credit/apply_credit",i=document.getElementById("flits-token").value;o=document.getElementById("flits-customer-url").value+o;var a=window.flitsApp.get_ajax_obj();a.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t=JSON.parse(this.responseText);"input"==e.tagName.toString().toLowerCase?e.value=n:e.innerHTML=n,e.setAttribute("disabled",!1),t.status&&(location.href="/checkout?discount="+t.code)}},a.open("POST",o,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),Object.defineProperty(t,"cart_token",Object.getOwnPropertyDescriptor(t,"token")),delete t.token;for(var c=0;c<t.items.length;c++)delete t.items[c].product_description;var r="token="+i+"&data="+btoa(unescape(encodeURIComponent(JSON.stringify(t))));a.send(r)},function(){location.href="/checkout"})},window.flitsApp.get_ajax_obj=function(){return window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):void 0},function(t,e){t=t||"docReady";var n=[],o=!1,i=!1;function a(){if(!o){o=!0;for(var t=0;t<n.length;t++)n[t].fn.call(window,n[t].ctx);n=[]}}function c(){"complete"===document.readyState&&a()}(e=e||window)[t]=function(t,e){if("function"!=typeof t)throw new TypeError("callback for docReady(fn) must be a function");o?setTimeout(function(){t(e)},1):(n.push({fn:t,ctx:e}),"complete"===document.readyState?setTimeout(a,1):i||(document.addEventListener?(document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1)):(document.attachEvent("onreadystatechange",c),window.attachEvent("onload",a)),i=!0))}}("flits_docReady",window),flits_docReady(function(){var t=document.getElementById("flits-is-cart-automatic").value;["input[name='checkout']","button[name='checkout']","[href$='checkout']","input[name='goto_pp']","button[name='goto_pp']","input[name='goto_gc']","button[name='goto_gc']",".additional-checkout-button",".google-wallet-button-holder",".amazon-payments-pay-button"].forEach(function(e){var n=document.querySelectorAll(e);if("object"==typeof n&&n)for(var o=0;o<n.length;o++){var i=n[o];if("function"!=typeof i.addEventListener)return;1==t&&i.parentElement.insertBefore(document.getElementById("flits-cart-automatic-code").children[0],i.parentElement.firstChild),i.addEventListener("click",function(t){window.flitsApp.get_discount_code(t,this)},!1)}})}),window.flitsApp.getCartData=function(t,e){var n=window.flitsApp.get_ajax_obj();n.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){if("function"==typeof t){var n=JSON.parse(this.responseText);t(n)}}else"function"==typeof e&&e()},n.open("GET","/cart.json",!0),n.send()};